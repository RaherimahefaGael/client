const _0x1bdc59 = _0xcde8; (function (_0x5cb912, _0x2a38fe) { const _0x4407c0 = _0xcde8, _0x1da974 = _0x5cb912(); while (!![]) { try { const _0x16cbc6 = parseInt(_0x4407c0(0x18e)) / 0x1 + -parseInt(_0x4407c0(0x1b8)) / 0x2 * (parseInt(_0x4407c0(0x171)) / 0x3) + parseInt(_0x4407c0(0x19e)) / 0x4 * (parseInt(_0x4407c0(0x162)) / 0x5) + -parseInt(_0x4407c0(0x181)) / 0x6 + -parseInt(_0x4407c0(0x173)) / 0x7 * (-parseInt(_0x4407c0(0x1bb)) / 0x8) + -parseInt(_0x4407c0(0x170)) / 0x9 * (parseInt(_0x4407c0(0x1c6)) / 0xa) + -parseInt(_0x4407c0(0x16f)) / 0xb; if (_0x16cbc6 === _0x2a38fe) break; else _0x1da974['push'](_0x1da974['shift']()); } catch (_0x3e0939) { _0x1da974['push'](_0x1da974['shift']()); } } }(_0x176e, 0x8ea26)); const openModalBtn = document[_0x1bdc59(0x195)](_0x1bdc59(0x1b3)), closeModalBtn = document[_0x1bdc59(0x195)](_0x1bdc59(0x17f)), modal = document[_0x1bdc59(0x195)](_0x1bdc59(0x1a1)), clientForm = document[_0x1bdc59(0x195)](_0x1bdc59(0x1b9)), clientTableBody = document[_0x1bdc59(0x1b0)](_0x1bdc59(0x1a3)), modalTitle = document[_0x1bdc59(0x195)](_0x1bdc59(0x197)), submitBtn = document[_0x1bdc59(0x195)](_0x1bdc59(0x194)), clientIdInput = document[_0x1bdc59(0x195)](_0x1bdc59(0x163)), searchInput = document[_0x1bdc59(0x195)](_0x1bdc59(0x1c1)), searchBtn = document['getElementById'](_0x1bdc59(0x1c2)), imageModal = document[_0x1bdc59(0x195)](_0x1bdc59(0x1b1)), closeImageModalBtn = document[_0x1bdc59(0x195)](_0x1bdc59(0x18a)), expandedImage = document[_0x1bdc59(0x195)](_0x1bdc59(0x17b)); let clients = []; const token = localStorage[_0x1bdc59(0x1a5)](_0x1bdc59(0x1bd)); !token && (window[_0x1bdc59(0x166)]['href'] = _0x1bdc59(0x164)); function _0xcde8(_0x400758, _0x40f546) { const _0x176e1b = _0x176e(); return _0xcde8 = function (_0xcde8d, _0x29038c) { _0xcde8d = _0xcde8d - 0x162; let _0x96fad7 = _0x176e1b[_0xcde8d]; return _0x96fad7; }, _0xcde8(_0x400758, _0x40f546); } async function fetchWithAuth(_0x3a7c78, _0x36ec0c = {}) { const _0x3d9a79 = _0x1bdc59; return _0x36ec0c[_0x3d9a79(0x165)] = { ..._0x36ec0c[_0x3d9a79(0x165)], 'Authorization': _0x3d9a79(0x16b) + token }, fetch(_0x3a7c78, _0x36ec0c); } openModalBtn['addEventListener'](_0x1bdc59(0x17a), () => { const _0x26c430 = _0x1bdc59; modalTitle[_0x26c430(0x1a8)] = _0x26c430(0x193), submitBtn[_0x26c430(0x1a8)] = 'Ajouter', clientForm['reset'](), clientIdInput[_0x26c430(0x17c)] = '', modal['style'][_0x26c430(0x189)] = _0x26c430(0x1ab); }), closeModalBtn[_0x1bdc59(0x19f)](_0x1bdc59(0x17a), () => { const _0x1c5a55 = _0x1bdc59; modal['style'][_0x1c5a55(0x189)] = 'none'; }), window[_0x1bdc59(0x19f)]('click', _0x10f8b4 => { const _0x156563 = _0x1bdc59; _0x10f8b4['target'] === modal && (modal[_0x156563(0x172)]['display'] = _0x156563(0x1be)); }), clientForm['addEventListener']('submit', async _0x153b26 => { const _0x4eb3d7 = _0x1bdc59; _0x153b26[_0x4eb3d7(0x177)](); const _0x1017f3 = new FormData(); _0x1017f3[_0x4eb3d7(0x168)]('nom', document['getElementById'](_0x4eb3d7(0x16e))[_0x4eb3d7(0x17c)]), _0x1017f3[_0x4eb3d7(0x168)]('ref', document[_0x4eb3d7(0x195)](_0x4eb3d7(0x1c3))['value']), _0x1017f3[_0x4eb3d7(0x168)](_0x4eb3d7(0x18f), document[_0x4eb3d7(0x195)]('no_compteur')[_0x4eb3d7(0x17c)]), _0x1017f3[_0x4eb3d7(0x168)](_0x4eb3d7(0x1ad), document[_0x4eb3d7(0x195)](_0x4eb3d7(0x1ad))[_0x4eb3d7(0x17c)]), _0x1017f3[_0x4eb3d7(0x168)]('photo', document['getElementById'](_0x4eb3d7(0x19a))[_0x4eb3d7(0x1c9)][0x0]); const _0x350c35 = clientIdInput[_0x4eb3d7(0x17c)], _0x1b8477 = _0x350c35 ? _0x4eb3d7(0x1b2) + _0x350c35 : 'http://localhost:3000/clients', _0x40f8e3 = _0x350c35 ? 'PUT' : _0x4eb3d7(0x18c); try { const _0x2e7796 = await fetchWithAuth(_0x1b8477, { 'method': _0x40f8e3, 'body': _0x1017f3 }); _0x2e7796['ok'] ? (alert(_0x350c35 ? _0x4eb3d7(0x178) : _0x4eb3d7(0x19c)), clientForm[_0x4eb3d7(0x16d)](), modal['style'][_0x4eb3d7(0x189)] = _0x4eb3d7(0x1be), fetchClients()) : alert(_0x4eb3d7(0x1aa)); } catch (_0x545bc7) { console[_0x4eb3d7(0x16c)]('Erreur\x20:', _0x545bc7); } }); async function fetchClients() { const _0x5afad3 = _0x1bdc59; try { const _0x33bf20 = await fetchWithAuth(_0x5afad3(0x1bc)); clients = await _0x33bf20['json'](), clients[_0x5afad3(0x169)]((_0x14ffe0, _0x2419d0) => _0x14ffe0[_0x5afad3(0x16e)][_0x5afad3(0x1a6)](_0x2419d0['nom'])), console[_0x5afad3(0x1ba)](clients), renderClients(clients); } catch (_0x20c301) { console[_0x5afad3(0x16c)](_0x5afad3(0x1cb), _0x20c301); } } function filterClients(_0x4d571a) { const _0xdc4068 = _0x1bdc59, _0x4a1d0f = clients[_0xdc4068(0x1c0)](_0x41854d => { const _0x5754ac = _0xdc4068; return _0x41854d[_0x5754ac(0x16e)] && _0x41854d[_0x5754ac(0x16e)][_0x5754ac(0x17d)]()['includes'](_0x4d571a) || _0x41854d[_0x5754ac(0x1c3)] && _0x41854d[_0x5754ac(0x1c3)][_0x5754ac(0x17d)]()[_0x5754ac(0x176)](_0x4d571a) || _0x41854d['no_compteur'] && _0x41854d[_0x5754ac(0x18f)]['toLowerCase']()[_0x5754ac(0x176)](_0x4d571a) || _0x41854d['adresse'] && _0x41854d[_0x5754ac(0x1ad)][_0x5754ac(0x17d)]()['includes'](_0x4d571a); }); _0x4a1d0f[_0xdc4068(0x169)]((_0x2d4d8f, _0x229e1f) => _0x2d4d8f[_0xdc4068(0x16e)][_0xdc4068(0x1a6)](_0x229e1f[_0xdc4068(0x16e)])), renderClients(_0x4a1d0f); } function renderClients(_0x100fe5) { const _0x557128 = _0x1bdc59; clientTableBody[_0x557128(0x175)] = '', _0x100fe5['forEach'](_0x2c9e3f => { const _0x2e2322 = _0x557128, _0x419008 = document[_0x2e2322(0x17e)]('tr'); _0x419008['innerHTML'] = _0x2e2322(0x1c5) + _0x2c9e3f[_0x2e2322(0x16e)] + _0x2e2322(0x180) + _0x2c9e3f[_0x2e2322(0x1c3)] + '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>' + _0x2c9e3f[_0x2e2322(0x18f)] + _0x2e2322(0x180) + _0x2c9e3f['adresse'] + '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x2c9e3f[_0x2e2322(0x19a)] ? '<img\x20src=\x22http://localhost:3000' + _0x2c9e3f[_0x2e2322(0x19a)] + _0x2e2322(0x185) : '') + _0x2e2322(0x1c4) + _0x2c9e3f['id'] + _0x2e2322(0x186) + _0x2c9e3f['id'] + _0x2e2322(0x1c8), clientTableBody[_0x2e2322(0x1c7)](_0x419008); }), document[_0x557128(0x196)](_0x557128(0x18d))['forEach'](_0x13be96 => { const _0x2aa74e = _0x557128; _0x13be96[_0x2aa74e(0x19f)](_0x2aa74e(0x17a), () => { openImageModal(_0x13be96['src']); }); }); } function openImageModal(_0x2929c8) { const _0x5a8dcc = _0x1bdc59; expandedImage['src'] = _0x2929c8, imageModal['style'][_0x5a8dcc(0x189)] = 'flex'; } closeImageModalBtn[_0x1bdc59(0x19f)](_0x1bdc59(0x17a), () => { const _0x5e7ccb = _0x1bdc59; imageModal[_0x5e7ccb(0x172)][_0x5e7ccb(0x189)] = 'none'; }), window[_0x1bdc59(0x19f)](_0x1bdc59(0x17a), _0x5bb59c => { const _0x24c56e = _0x1bdc59; _0x5bb59c['target'] === imageModal && (imageModal['style'][_0x24c56e(0x189)] = _0x24c56e(0x1be)); }); function editClient(_0x9847c4) { const _0x2264fa = _0x1bdc59, _0x71eab1 = clients['find'](_0x136399 => _0x136399['id'] === _0x9847c4); _0x71eab1 && (modalTitle['textContent'] = 'Modifier\x20un\x20Client', submitBtn[_0x2264fa(0x1a8)] = 'Modifier', clientIdInput[_0x2264fa(0x17c)] = _0x71eab1['id'], document[_0x2264fa(0x195)](_0x2264fa(0x16e))[_0x2264fa(0x17c)] = _0x71eab1[_0x2264fa(0x16e)], document[_0x2264fa(0x195)](_0x2264fa(0x1c3))[_0x2264fa(0x17c)] = _0x71eab1[_0x2264fa(0x1c3)], document[_0x2264fa(0x195)](_0x2264fa(0x18f))['value'] = _0x71eab1['no_compteur'], document[_0x2264fa(0x195)](_0x2264fa(0x1ad))[_0x2264fa(0x17c)] = _0x71eab1['adresse'], modal[_0x2264fa(0x172)][_0x2264fa(0x189)] = 'flex'); } async function deleteClient(_0xa76d7c) { const _0x3b8b4a = _0x1bdc59; if (confirm(_0x3b8b4a(0x19d))) try { const _0x1abeee = await fetchWithAuth('http://localhost:3000/clients/' + _0xa76d7c, { 'method': _0x3b8b4a(0x192) }); _0x1abeee['ok'] ? (alert(_0x3b8b4a(0x1a0)), fetchClients()) : alert(_0x3b8b4a(0x179)); } catch (_0x130a24) { console[_0x3b8b4a(0x16c)](_0x3b8b4a(0x1cb), _0x130a24); } } searchInput[_0x1bdc59(0x19f)](_0x1bdc59(0x1b4), () => { const _0x258368 = _0x1bdc59, _0x51a314 = searchInput[_0x258368(0x17c)]['trim']()[_0x258368(0x17d)](); filterClients(_0x51a314); }), searchBtn[_0x1bdc59(0x19f)](_0x1bdc59(0x17a), () => { const _0x54a2b2 = _0x1bdc59, _0x12f8d1 = searchInput[_0x54a2b2(0x17c)][_0x54a2b2(0x1b5)]()[_0x54a2b2(0x17d)](); filterClients(_0x12f8d1); }); const logoutBtn = document[_0x1bdc59(0x195)]('logoutBtn'); logoutBtn['addEventListener']('click', () => { const _0x12af97 = _0x1bdc59; localStorage[_0x12af97(0x183)](_0x12af97(0x1bd)), window['location'][_0x12af97(0x182)] = _0x12af97(0x164); }); const changePasswordBtn = document[_0x1bdc59(0x195)](_0x1bdc59(0x1a2)), changePasswordModal = document[_0x1bdc59(0x195)](_0x1bdc59(0x190)), closeChangePasswordModalBtn = document[_0x1bdc59(0x195)](_0x1bdc59(0x1a9)), changePasswordForm = document[_0x1bdc59(0x195)]('changePasswordForm'); changePasswordBtn[_0x1bdc59(0x19f)](_0x1bdc59(0x17a), () => { const _0x1a9d72 = _0x1bdc59; changePasswordModal[_0x1a9d72(0x172)][_0x1a9d72(0x189)] = _0x1a9d72(0x1ab); }), closeChangePasswordModalBtn['addEventListener'](_0x1bdc59(0x17a), () => { const _0x27dafe = _0x1bdc59; changePasswordModal[_0x27dafe(0x172)][_0x27dafe(0x189)] = _0x27dafe(0x1be); }), window[_0x1bdc59(0x19f)](_0x1bdc59(0x17a), _0x30a2e7 => { const _0x3e149c = _0x1bdc59; _0x30a2e7[_0x3e149c(0x188)] === changePasswordModal && (changePasswordModal[_0x3e149c(0x172)][_0x3e149c(0x189)] = _0x3e149c(0x1be)); }), changePasswordForm[_0x1bdc59(0x19f)](_0x1bdc59(0x1ca), async _0x1e1d5c => { const _0x2f280f = _0x1bdc59; _0x1e1d5c[_0x2f280f(0x177)](); const _0x449406 = document[_0x2f280f(0x195)](_0x2f280f(0x1af))[_0x2f280f(0x17c)], _0x4e2574 = document[_0x2f280f(0x195)](_0x2f280f(0x174))[_0x2f280f(0x17c)], _0x27f866 = document['getElementById']('confirmNewPassword')[_0x2f280f(0x17c)]; if (_0x4e2574 !== _0x27f866) { alert('Les\x20nouveaux\x20mots\x20de\x20passe\x20ne\x20correspondent\x20pas.'); return; } try { const _0x4a079d = await fetchWithAuth('http://localhost:3000/change-password', { 'method': 'POST', 'headers': { 'Content-Type': _0x2f280f(0x1cc) }, 'body': JSON[_0x2f280f(0x1b7)]({ 'currentPassword': _0x449406, 'newPassword': _0x4e2574 }) }), _0x15ce35 = await _0x4a079d[_0x2f280f(0x191)](); _0x4a079d['ok'] ? (alert(_0x2f280f(0x1a7)), changePasswordForm[_0x2f280f(0x16d)](), changePasswordModal[_0x2f280f(0x172)][_0x2f280f(0x189)] = 'none') : alert(_0x15ce35[_0x2f280f(0x16c)] || _0x2f280f(0x184)); } catch (_0x382f69) { console[_0x2f280f(0x16c)](_0x2f280f(0x1cb), _0x382f69), alert(_0x2f280f(0x19b)); } }), fetchClients(); let inactivityTimer; const INACTIVITY_DURATION = 0x5 * 0x3c * 0x3e8, TRANSPARENCY_STATE_KEY = _0x1bdc59(0x1b6); function makeAppTransparent() { const _0xd56c2d = _0x1bdc59; document[_0xd56c2d(0x18b)][_0xd56c2d(0x172)][_0xd56c2d(0x198)] = _0xd56c2d(0x187), document[_0xd56c2d(0x18b)][_0xd56c2d(0x172)][_0xd56c2d(0x1ae)] = 'opacity\x201s', localStorage[_0xd56c2d(0x1bf)](TRANSPARENCY_STATE_KEY, _0xd56c2d(0x167)), document[_0xd56c2d(0x16a)](_0xd56c2d(0x17a), resetInactivityTimer), document['removeEventListener'](_0xd56c2d(0x1ac), resetInactivityTimer), document[_0xd56c2d(0x16a)](_0xd56c2d(0x199), resetInactivityTimer); } function resetInactivityTimer() { clearTimeout(inactivityTimer), inactivityTimer = setTimeout(makeAppTransparent, INACTIVITY_DURATION); } function setupInactivityDetection() { const _0x4756a7 = _0x1bdc59; document[_0x4756a7(0x19f)](_0x4756a7(0x17a), resetInactivityTimer), document['addEventListener'](_0x4756a7(0x1ac), resetInactivityTimer), document[_0x4756a7(0x19f)](_0x4756a7(0x199), resetInactivityTimer), resetInactivityTimer(); } function checkTransparencyState() { const _0x5b3974 = _0x1bdc59, _0x49d2f9 = localStorage[_0x5b3974(0x1a5)](TRANSPARENCY_STATE_KEY) === 'true'; _0x49d2f9 ? (document[_0x5b3974(0x18b)]['style']['opacity'] = _0x5b3974(0x187), document[_0x5b3974(0x18b)][_0x5b3974(0x172)]['transition'] = _0x5b3974(0x1a4), document[_0x5b3974(0x16a)](_0x5b3974(0x17a), resetInactivityTimer), document[_0x5b3974(0x16a)]('keydown', resetInactivityTimer), document[_0x5b3974(0x16a)]('mousemove', resetInactivityTimer)) : setupInactivityDetection(); } function resetTransparencyState() { const _0xc1d5df = _0x1bdc59; localStorage[_0xc1d5df(0x183)](TRANSPARENCY_STATE_KEY), document['body'][_0xc1d5df(0x172)]['opacity'] = '1', setupInactivityDetection(); } function _0x176e() { const _0x2b555d = ['value', 'toLowerCase', 'createElement', 'closeModalBtn', '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>', '1128072aZtVys', 'href', 'removeItem', 'Erreur\x20lors\x20de\x20la\x20modification\x20du\x20mot\x20de\x20passe.', '\x22\x20alt=\x22Photo\x20du\x20client\x22\x20class=\x22clickable-image\x22>', ')\x22>Modifier</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete\x22\x20onclick=\x22deleteClient(', '0.0', 'target', 'display', 'closeImageModalBtn', 'body', 'POST', '.clickable-image', '166566fTGiqw', 'no_compteur', 'changePasswordModal', 'json', 'DELETE', 'Ajouter\x20un\x20Client', 'submitBtn', 'getElementById', 'querySelectorAll', 'modalTitle', 'opacity', 'mousemove', 'photo', 'Une\x20erreur\x20s\x27est\x20produite\x20lors\x20de\x20la\x20modification\x20du\x20mot\x20de\x20passe.', 'Client\x20ajouté\x20avec\x20succès\x20!', 'Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20client\x20?', '24cDMVoU', 'addEventListener', 'Client\x20supprimé\x20avec\x20succès\x20!', 'modal', 'changePasswordBtn', '#clientTable\x20tbody', 'opacity\x201s', 'getItem', 'localeCompare', 'Mot\x20de\x20passe\x20modifié\x20avec\x20succès\x20!', 'textContent', 'closeChangePasswordModalBtn', 'Erreur\x20lors\x20de\x20la\x20soumission\x20du\x20formulaire.', 'flex', 'keydown', 'adresse', 'transition', 'currentPassword', 'querySelector', 'imageModal', 'http://localhost:3000/clients/', 'openModalBtn', 'input', 'trim', 'isAppTransparent', 'stringify', '4262qPVXOL', 'clientForm', 'log', '16LJDeJI', 'http://localhost:3000/clients', 'token', 'none', 'setItem', 'filter', 'searchInput', 'searchBtn', 'ref', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit\x22\x20onclick=\x22editClient(', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>', '320WoQQMf', 'appendChild', ')\x22>Supprimer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'files', 'submit', 'Erreur\x20:', 'application/json', '771670ASnswt', 'clientId', 'index.html', 'headers', 'location', 'true', 'append', 'sort', 'removeEventListener', 'Bearer\x20', 'error', 'reset', 'nom', '9338615OafuRq', '8703bCdHxM', '237wbNNSE', 'style', '2547755arbFmM', 'newPassword', 'innerHTML', 'includes', 'preventDefault', 'Client\x20modifié\x20avec\x20succès\x20!', 'Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20client.', 'click', 'expandedImage']; _0x176e = function () { return _0x2b555d; }; return _0x176e(); } window[_0x1bdc59(0x19f)]('load', checkTransparencyState);